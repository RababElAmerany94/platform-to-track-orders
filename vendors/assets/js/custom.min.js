function init_sidebar(){var e=function(){$RIGHT_COL.css("min-height",$(window).height());var e=$BODY.outerHeight(),t=$BODY.hasClass("footer_fixed")?-10:$FOOTER.height(),a=$LEFT_COL.eq(1).height()+$SIDEBAR_FOOTER.height(),i=e<a?a:e;i-=$NAV_MENU.height()+t,$RIGHT_COL.css("min-height",i)};$SIDEBAR_MENU.find("a").on("click",function(t){var a=$(this).parent();a.is(".active")?(a.removeClass("active active-sm"),$("ul:first",a).slideUp(function(){e()})):(a.parent().is(".child_menu")?$BODY.is(".nav-sm")&&($SIDEBAR_MENU.find("li").removeClass("active active-sm"),$SIDEBAR_MENU.find("li ul").slideUp()):($SIDEBAR_MENU.find("li").removeClass("active active-sm"),$SIDEBAR_MENU.find("li ul").slideUp()),a.addClass("active"),$("ul:first",a).slideDown(function(){e()}))}),$MENU_TOGGLE.on("click",function(){$BODY.hasClass("nav-md")?($SIDEBAR_MENU.find("li.active ul").hide(),$SIDEBAR_MENU.find("li.active").addClass("active-sm").removeClass("active")):($SIDEBAR_MENU.find("li.active-sm ul").show(),$SIDEBAR_MENU.find("li.active-sm").addClass("active").removeClass("active-sm")),$BODY.toggleClass("nav-md nav-sm"),e(),$(".dataTable").each(function(){$(this).dataTable().fnDraw()})}),$SIDEBAR_MENU.find('a[href="'+CURRENT_URL+'"]').parent("li").addClass("current-page"),$SIDEBAR_MENU.find("a").filter(function(){return this.href==CURRENT_URL}).parent("li").addClass("current-page").parents("ul").slideDown(function(){e()}).parent().addClass("active"),$(window).smartresize(function(){e()}),e(),$.fn.mCustomScrollbar&&$(".menu_fixed").mCustomScrollbar({autoHideScrollbar:!0,theme:"minimal",mouseWheel:{preventDefault:!0}})}function gd(e,t,a){return new Date(e,t,a).getTime()}function dashboard(e,t){$.ajax({url:"/dashboard/orderActivities",method:"POST",data:{startDate:e.format("YYYY-M-D"),endDate:t.format("YYYY-M-D")},success:function(e){for(var t=[],a=0;a<e.data.chart.length;a++)t.push([e.data.chart[a].day,e.data.chart[a].count]);$("#chart_plot_01").length&&$.plot($("#chart_plot_01"),[t],chart_settings),$("#top_dispatchers").empty();for(var i=0;i<e.data.dispatcher.length;i++)$("#top_dispatchers").append('<div class="widget_summary"><div class="w_left w_40"><span>'+e.data.dispatcher[i].full_name+'</span></div><div class="w_center w_50"><div class="progress"><div class="progress-bar bg-green" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: '+e.data.dispatcher[i].score+'%;"><span class="sr-only">'+e.data.dispatcher[i].score+'% Complete</span></div></div></div><div class="w_right w_10"><span>'+e.data.dispatcher[i].count+'</span></div><div class="clearfix"></div></div>');$("#top_drivers").empty();for(var n=0;n<3&&n<e.data.driver.length;n++)$("#top_drivers").append('<div class="widget_summary"><div class="w_left w_40"><span>'+e.data.driver[n].full_name+'</span></div><div class="w_center w_50"><div class="progress"><div class="progress-bar bg-green" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: '+e.data.driver[n].score+'%;"><span class="sr-only">'+e.data.driver[n].score+'% Complete</span></div></div></div><div class="w_right w_10"><span>'+e.data.driver[n].count+'</span></div><div class="clearfix"></div></div>');$("#label_doughnut").empty();var r=["#BDC3C7","#9B59B6","#E74C3C","#26B99A","#3498DB"],s=["#CFD4D8","#B370CF","#E95E4F","#36CAAB","#49A9EA"],o=[];t=[];for(var c=[],l=[],d=0;d<e.data.driver.length;d++)o.push(e.data.driver[d].full_name),t.push(e.data.driver[d].count),c.push(r[d]),l.push(s[d]),$("#label_doughnut").append('<tr><td><p><i class="fa fa-square" style="color: '+r[d]+';"></i>'+e.data.driver[d].full_name+"</p></td><td>"+e.data.driver[d].count+"</td></tr>");var u={type:"doughnut",tooltipFillColor:"rgba(51, 51, 51, 0.55)",data:{labels:o,datasets:[{data:t,backgroundColor:c,hoverBackgroundColor:l}]},options:{legend:!0,responsive:!1}};if($("#chart_doughnut").length)new Chart($("#chart_doughnut"),u);if($("#activities").empty(),void 0!==e.data.activities)for(var p=0;p<e.data.activities.length;p++)$("#activities").append('<li><div class="block"><div class="block_content"><h2 class="title"><a href="/orders/index/read/'+e.data.activities[p].order+'">'+e.data.activities[p].title+'</a></h2><div class="byline"><span>'+e.data.activities[p].time+'</span> minutes ago</div><p class="excerpt">'+e.data.activities[p].description+"</p></div></div></li>");else $("#activities").parent().parent().parent().addClass("fixed_height_320"),$("#activities").parent().html("<p>No new orders, just relax.</p>");if($("#available_drivers_now").empty(),void 0!==e.data.available)for(var h=0;h<e.data.available.length;h++)$("#available_drivers_now").append('<span class="label label-success">'+e.data.available[h].name+"</span>&nbsp;&nbsp;")}})}function init_daterangepicker(){if(void 0!==$.fn.daterangepicker){var e={startDate:moment().subtract(15,"days"),endDate:moment(),minDate:"01/01/2017",maxDate:"12/31/2150",dateLimit:{days:60},showDropdowns:!0,showWeekNumbers:!0,timePicker:!1,timePickerIncrement:1,timePicker12Hour:!0,ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},opens:"left",buttonClasses:["btn btn-default"],applyClass:"btn-small btn-primary",cancelClass:"btn-small",format:"MM/DD/YYYY",separator:" to ",locale:{applyLabel:"Submit",cancelLabel:"Clear",fromLabel:"From",toLabel:"To",customRangeLabel:"Custom",daysOfWeek:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],firstDay:1}};$("#reportrange span").html(moment().subtract(15,"days").format("MMMM D, YYYY")+" - "+moment().format("MMMM D, YYYY")),$("#reportrange").daterangepicker(e,function(e,t,a){$("#reportrange span").html(e.format("MMMM D, YYYY")+" - "+t.format("MMMM D, YYYY"))})}}!function(e,t){var a=function(e,t,a){var i;return function(){var n=this,r=arguments;i?clearTimeout(i):a&&e.apply(n,r),i=setTimeout(function(){a||e.apply(n,r),i=null},t||100)}};jQuery.fn[t]=function(e){return e?this.bind("resize",a(e)):this.trigger(t)}}(jQuery,"smartresize");var CURRENT_URL=window.location.href.split("#")[0].split("?")[0],$BODY=$("body"),$MENU_TOGGLE=$("#menu_toggle"),$SIDEBAR_MENU=$("#sidebar-menu"),$SIDEBAR_FOOTER=$(".sidebar-footer"),$LEFT_COL=$(".left_col"),$RIGHT_COL=$(".right_col"),$NAV_MENU=$(".nav_menu"),$FOOTER=$("footer"),chart_settings={series:{lines:{show:!1,fill:!0},splines:{show:!0,tension:.4,lineWidth:1,fill:.4},points:{radius:0,show:!0},shadowSize:2},grid:{verticalLines:!0,hoverable:!0,clickable:!0,tickColor:"#d5d5d5",borderWidth:1,color:"#fff"},colors:["rgba(38, 185, 154, 0.38)","rgba(3, 88, 106, 0.38)"],xaxis:{tickColor:"rgba(51, 51, 51, 0.06)",mode:"time",tickSize:[1,"day"],axisLabel:"Date",axisLabelUseCanvas:!0},yaxis:{ticks:8,tickColor:"rgba(51, 51, 51, 0.06)",minTickSize:1,tickFormatter:function(e,t){return e}},tooltip:!0};$(document).ready(function(){$(".collapse-link").on("click",function(){var e=$(this).closest(".x_panel"),t=$(this).find("i"),a=e.find(".x_content");e.attr("style")?a.slideToggle(200,function(){e.removeAttr("style")}):(a.slideToggle(200),e.css("height","auto")),t.toggleClass("fa-chevron-up fa-chevron-down")}),$(".close-link").click(function(){$(this).closest(".x_panel").remove()})}),$(".progress .progress-bar")[0]&&$(".progress .progress-bar").progressbar(),$(document).ready(function(){$(".js-switch")[0]&&Array.prototype.slice.call(document.querySelectorAll(".js-switch")).forEach(function(e){new Switchery(e,{color:"#26B99A"})})}),$(document).ready(function(){$("input.flat")[0]&&$(document).ready(function(){$("input.flat").iCheck({checkboxClass:"icheckbox_flat-green",radioClass:"iradio_flat-green"})})}),$("table input").on("ifChecked",function(){checkState="",$(this).parent().parent().parent().addClass("selected"),countChecked()}),$("table input").on("ifUnchecked",function(){checkState="",$(this).parent().parent().parent().removeClass("selected"),countChecked()});var checkState="";$(".bulk_action input").on("ifChecked",function(){checkState="",$(this).parent().parent().parent().addClass("selected"),countChecked()}),$(".bulk_action input").on("ifUnchecked",function(){checkState="",$(this).parent().parent().parent().removeClass("selected"),countChecked()}),$(".bulk_action input#check-all").on("ifChecked",function(){checkState="all",countChecked()}),$(".bulk_action input#check-all").on("ifUnchecked",function(){checkState="none",countChecked()}),$(document).ready(function(){$(".expand").on("click",function(){$(this).next().slideToggle(200),$expand=$(this).find(">:first-child"),"+"==$expand.text()?$expand.text("-"):$expand.text("+")})}),"undefined"!=typeof NProgress&&($(document).ready(function(){NProgress.start()}),$(window).load(function(){NProgress.done()}));var originalLeave=$.fn.popover.Constructor.prototype.leave;$.fn.popover.Constructor.prototype.leave=function(e){var t,a,i=e instanceof this.constructor?e:$(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);originalLeave.call(this,e),e.currentTarget&&(t=$(e.currentTarget).siblings(".popover"),a=i.timeout,t.one("mouseenter",function(){clearTimeout(a),t.one("mouseleave",function(){$.fn.popover.Constructor.prototype.leave.call(i,i)})}))},$("body").popover({selector:"[data-popover]",trigger:"click hover",delay:{show:50,hide:400}}),$(document).ready(function(){init_sidebar(),init_daterangepicker()});